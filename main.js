!function(){"use strict";class e{constructor(e,t,s){let{name:o,link:r}=e;this.name=o,this.link=r,this._cardSelector=t,this._handleImagePreview=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeIcon),this._deleteCard.addEventListener("click",this._handleDeleteCard),this._cardImage.addEventListener("click",(()=>{this._handleImagePreview(this)}))}_handleDeleteCard=()=>{this._cardElement.remove(),this._cardElement=null};_handleLikeIcon=()=>{this._likeButton.classList.toggle("card__like-button_active")};getview(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__title").textContent=this.name,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._deleteCard=this._cardElement.querySelector(".card__remove-button"),this._cardImage.src=this.link,this._cardImage.alt=this.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}resetValidation(){this._toggleButtonState()}_toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}var o=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._button=this._popupForm.querySelector(".modal__button")}_getInputValues(){const e=Array.from(this._popupForm.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}};const r=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],n=document.querySelector(".profile__edit-button"),i=document.querySelector("#profile-edit-modal"),l=document.querySelector("#add-card-modal"),a=(i.querySelector("#modal-close"),l.querySelector("#modal-close"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-name")),c=document.querySelector("#profile-description-input"),u=document.querySelector(".profile__add-button"),d=i.querySelector("#modal-form"),m=l.querySelector("#modal-form"),_=(m.querySelector("#card-title-input"),m.querySelector("#card-url-input"),document.querySelector(".cards__list"),document.querySelector(".cards__list"),document.querySelector("#card-template").content.firstElementChild,document.querySelector("#preview-image-modal")),p=(_.querySelector(".modal__img"),_.querySelector(".modal__caption"),_.querySelector("#modal-close"),"#card-template"),h={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};console.log(r),console.log(n);const E=new class{constructor(e,t){let{renderer:s,items:o}=e;this._renderer=s,this._items=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:r,renderer:e=>{const t=f(e);E.addItem(t)}},".cards__list");E.renderItems();const S=new o("#add-card-modal",(function(e){console.log(e),E.addItem(f({name:e.title,link:e.url})),S.close(),m.reset(),L.resetValidation()}));S.setEventListeners();const v=new o("#profile-edit-modal",(function(e){g.setUserInfo({title:e.name,description:e.description})}));v.setEventListeners();const y=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".modal__img"),this._caption=this._popupElement.querySelector(".modal__caption")}open(e){let{link:t,name:s}=e;this._image.src=t,this._image.alt=s,this._caption.textContent=s,super.open()}}("#preview-image-modal");y.setEventListeners();const g=new class{constructor(e){let{profileName:t,jobElement:s}=e;this._profileName=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{title:this._profileName.textContent,description:this._jobElement.textContent}}setUserInfo(e){this._profileName.textContent=e.title,this._jobElement.textContent=e.description}}({profileName:".profile__title",jobElement:".profile__description"});function f(t){return new e(t,p,w).getview()}const q=new t(h,d),L=new t(h,m);function w(e){y.open(e)}q.enableValidation(),L.enableValidation(),n.addEventListener("click",(()=>{const e=g.getUserInfo();a.value=e.title,c.value=e.description,v.open()})),u.addEventListener("click",(()=>{S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1pSCxFQUFvQixJQUFJN0csRUFBY0MsRUFBVW1FLEdBQ2hEMEIsRUFBbUIsSUFBSTlGLEVBQWNDLEVBQVVvRSxHQUtyRCxTQUFTL0YsRUFBbUJnSCxHQUMxQmMsRUFBa0IzRCxLQUFLNkMsRUFDekIsQ0FMQXVCLEVBQWtCNUUsbUJBQ2xCNkQsRUFBaUI3RCxtQkErQmpCNkIsRUFBa0IzRSxpQkFBaUIsU0FBUyxLQUMxQyxNQUFNMkgsRUFBa0JiLEVBQVVVLGNBQ2xDMUMsRUFBa0JMLE1BQVFrRCxFQUFnQm5CLE1BQzFDekIsRUFBd0JOLE1BQVFrRCxFQUFnQlgsWUFDaERKLEVBQWlCdEQsTUFBTSxJQUd6QjBCLEVBQWlCaEYsaUJBQWlCLFNBQVMsS0FDekNzRyxFQUFhaEQsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwd2l0aGZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy91c2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWN0dWFsIGNhcmRcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZVByZXZpZXcpIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VQcmV2aWV3ID0gaGFuZGxlSW1hZ2VQcmV2aWV3O1xyXG4gIH1cclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUljb24pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZVByZXZpZXcodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9O1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgX2hhbmRsZUxpa2VJY29uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgZ2V0dmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcmVtb3ZlLWJ1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMubmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsO1xyXG4gIH1cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgfVxyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuICB9XHJcbiAgb3Blbih7IGxpbmssIG5hbWUgfSkge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50c1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1jbG9zZVwiKTtcclxuY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1jbG9zZVwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZm9ybVwiKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZm9ybVwiKTtcclxuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBjYXJkVXJsSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXVybC1pbnB1dFwiKTtcclxuY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmNvbnN0IGNhcmRJbWFnZUVMID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuY29uc3QgVGVtcGxhdGUgPVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuY29uc3QgbW9kYWxJbWFnZUVsZW1lbnQgPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWdcIik7XHJcbmNvbnN0IGltYWdlTW9kYWxjYXB0aW9uID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuY29uc3QgcHJlSW1nTW9kYWxDbG9zZUJ1dHRvbiA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtY2xvc2VcIik7XHJcblxyXG5leHBvcnQge1xyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVFZGl0TW9kYWwsXHJcbiAgYWRkQ2FyZE1vZGFsLFxyXG4gIHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uLFxyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24sXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm1FbGVtZW50LFxyXG4gIGNhcmRUaXRsZUlucHV0LFxyXG4gIGNhcmRVcmxJbnB1dCxcclxuICBjYXJkTGlzdEVsLFxyXG4gIGNhcmRJbWFnZUVMLFxyXG4gIFRlbXBsYXRlLFxyXG4gIG1vZGFsSW1hZ2VFbGVtZW50LFxyXG4gIGltYWdlTW9kYWxjYXB0aW9uLFxyXG4gIHByZUltZ01vZGFsQ2xvc2VCdXR0b24sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbi8vX19fX19fX19cclxuXHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhmb3JtLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL3VzZXJJbmZvLmpzXCI7XHJcbi8vIGltcG9ydCB7IGRhdGEgfSBmcm9tIFwiYXV0b3ByZWZpeGVyXCI7XHJcblxyXG4vLyAvL19fX19fX19cclxuXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIC8vIHByb2ZpbGVFZGl0TW9kYWwsXHJcbiAgLy8gYWRkQ2FyZE1vZGFsLFxyXG4gIC8vIHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uLFxyXG4gIC8vIHByb2ZpbGVUaXRsZSxcclxuICAvLyBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24sXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm1FbGVtZW50LFxyXG4gIC8vIGNhcmRUaXRsZUlucHV0LFxyXG4gIC8vIGNhcmRVcmxJbnB1dCxcclxuICAvLyBjYXJkTGlzdEVsLFxyXG4gIC8vIGNhcmRJbWFnZUVMLFxyXG4gIC8vIFRlbXBsYXRlLFxyXG4gIC8vIG1vZGFsSW1hZ2VFbGVtZW50LFxyXG4gIC8vIGltYWdlTW9kYWxjYXB0aW9uLFxyXG4gIC8vIHByZUltZ01vZGFsQ2xvc2VCdXR0b24sXHJcbiAgY2FyZFNlbGVjdG9yLFxyXG4gIHNldHRpbmdzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmNvbnNvbGUubG9nKGluaXRpYWxDYXJkcyk7XHJcbmNvbnNvbGUubG9nKHByb2ZpbGVFZGl0QnV0dG9uKTtcclxuXHJcbi8vIGluc3RhbmNlc1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxyXG4pO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBpbWFnZVByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpOyAvL3Nob3VsZCBiZSBnb29kXHJcbmltYWdlUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCB1c2VySW5mb3IgPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGpvYkVsZW1lbnQ6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uc1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VQcmV2aWV3KTtcclxuICByZXR1cm4gY2FyZC5nZXR2aWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQ2FyZEZvcm1FbGVtZW50KTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZVByZXZpZXcoY2FyZERhdGEpIHtcclxuICBpbWFnZVByZXZpZXdQb3B1cC5vcGVuKGNhcmREYXRhKTtcclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IEhhbmRsZXJzXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoaW5wdXREYXRhKSB7XHJcbiAgdXNlckluZm9yLnNldFVzZXJJbmZvKHtcclxuICAgIHRpdGxlOiBpbnB1dERhdGEubmFtZSxcclxuICAgIGRlc2NyaXB0aW9uOiBpbnB1dERhdGEuZGVzY3JpcHRpb24sXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgY29uc29sZS5sb2coaW5wdXRWYWx1ZXMpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oXHJcbiAgICBjcmVhdGVDYXJkKHsgbmFtZTogaW5wdXRWYWx1ZXMudGl0bGUsIGxpbms6IGlucHV0VmFsdWVzLnVybCB9KVxyXG4gICk7XHJcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgYWRkQ2FyZEZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRzIGxpc3RlbmVyc1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm9yLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8udGl0bGU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uZGVzY3JpcHRpb247XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyLCBpdGVtcyB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lLCBqb2JFbGVtZW50IH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JFbGVtZW50KTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0aXRsZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXJJbmYpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlckluZi50aXRsZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VySW5mLmRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VQcmV2aWV3IiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZVByZXZpZXciLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUNhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXR2aWV3IiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsInJlc2V0VmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfYnV0dG9uIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiaW5pdGlhbENhcmRzIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsImZpcnN0RWxlbWVudENoaWxkIiwiY29uc29sZSIsImxvZyIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIml0ZW1zIiwiX3JlbmRlcmVyIiwiX2l0ZW1zIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmREYXRhIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiYWRkQ2FyZFBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInRpdGxlIiwidXJsIiwicmVzZXQiLCJhZGRGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVQb3B1cCIsImlucHV0RGF0YSIsInVzZXJJbmZvciIsInNldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJpbWFnZVByZXZpZXdQb3B1cCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwicHJvZmlsZU5hbWUiLCJqb2JFbGVtZW50IiwiX3Byb2ZpbGVOYW1lIiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInVzZXJJbmYiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImN1cnJlbnRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=